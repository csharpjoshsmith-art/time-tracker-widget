<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚è±Ô∏è Time Tracker</h1>
            <button id="settingsBtn" class="icon-btn" title="Settings">‚öôÔ∏è</button>
        </div>

        <div class="timer-controls-container">
            <div class="timer-display">
                <div id="currentTask">No task selected</div>
                <div id="timerDisplay">00:00:00</div>
                <div id="timerStatus">Stopped</div>
            </div>

            <div class="control-buttons">
                <button id="pauseBtn" class="control-btn" disabled>‚è∏Ô∏è Pause</button>
                <button id="lunchBtn" class="control-btn lunch-btn">üçî Lunch Break</button>
                <button id="stopBtn" class="control-btn stop-btn" disabled>‚èπÔ∏è Stop</button>
            </div>

            <div class="quick-tasks-inline">
                <h3>Quick Tasks</h3>
                <div class="task-grid" id="quickTasks">
                    <button class="task-btn" data-task="General Projects">üìÅ General Projects</button>
                    <button class="task-btn" data-task="General Meetings">üë• General Meetings</button>
                    <button class="task-btn" data-task="Department Meeting">üè¢ Department Meeting</button>
                </div>
            </div>
        </div>

        <div class="section">
            <h3>Teams Integration</h3>
            <div id="teamsStatus" class="teams-status">
                <div class="teams-status-indicator" id="teamsIndicator"></div>
                <span id="teamsStatusText">Monitoring for calls...</span>
            </div>
        </div>

        <div class="section">
            <h3>Recent</h3>
            <div id="recentTasks" class="task-grid recent-tasks">
                <div class="empty-message">No recent tasks</div>
            </div>
        </div>

        <div class="section">
            <h3>Jira Tickets (Assigned to Me) <button id="refreshJiraBtn" class="small-btn">üîÑ</button></h3>
            <div id="jiraStatus" class="status-message">Not configured</div>
            <div class="jira-container">
                <div id="projectSidebar" class="project-sidebar"></div>
                <div id="jiraTickets" class="task-grid jira-tickets-main"></div>
            </div>
        </div>

        <div class="section">
            <h3>Jira Tickets (Reported by Me) <button id="refreshReporterBtn" class="small-btn">üîÑ</button></h3>
            <div id="reporterStatus" class="status-message">Not configured</div>
            <div id="reporterTickets" class="task-grid reporter-tickets"></div>
        </div>

        <div class="section">
            <h3>Custom Tasks</h3>
            <div class="add-task-container">
                <input type="text" id="customTaskInput" placeholder="Enter task name..." />
                <button id="addTaskBtn">‚ûï Add</button>
            </div>
            <div id="customTasks" class="task-grid"></div>
        </div>

        <div class="section">
            <h3 class="collapsible-header collapsed" id="weekHeader">
                <span class="collapse-icon">‚ñº</span>
                This Week <span id="weekRange" class="week-range"></span>
            </h3>
            <div id="weekSummary" class="summary-box collapsible-content collapsed">
                <p>No time tracked this week</p>
            </div>
        </div>

        <div class="section">
            <h3 class="collapsible-header" id="todayHeader">
                <span class="collapse-icon">‚ñº</span>
                Today's Summary
            </h3>
            <div id="todaySummary" class="summary-box collapsible-content">
                <p>No time tracked today</p>
            </div>
        </div>

        <div class="footer-buttons">
            <button id="weeklyReportBtn" class="primary-btn">üìä Weekly Report</button>
        </div>
    </div>

    <!-- Weekly Report Modal -->
    <div id="reportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Weekly Report</h2>
                <span class="close">&times;</span>
            </div>
            <div id="reportContent" class="modal-body"></div>
            <div class="modal-footer">
                <button id="exportReportBtn" class="primary-btn">üì• Export CSV</button>
            </div>
        </div>
    </div>

    <!-- Edit Time Entry Modal -->
    <div id="editEntryModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Edit Time Entry</h2>
                <span class="close-edit">&times;</span>
            </div>
            <div class="modal-body">
                <div id="editEntryTask" class="edit-task-name"></div>
                <div class="edit-form">
                    <div class="form-group">
                        <label for="editDate">Date:</label>
                        <input type="date" id="editDate" />
                    </div>
                    <div class="form-group">
                        <label for="editHours">Hours:</label>
                        <input type="number" id="editHours" min="0" max="23" value="0" />
                    </div>
                    <div class="form-group">
                        <label for="editMinutes">Minutes:</label>
                        <input type="number" id="editMinutes" min="0" max="59" value="0" />
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelEditBtn" class="secondary-btn">Cancel</button>
                <button id="saveEditBtn" class="primary-btn">Save</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteConfirmModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Delete Time Entry?</h2>
                <span class="close-delete">&times;</span>
            </div>
            <div class="modal-body">
                <div class="delete-warning">
                    <div class="warning-icon">‚ö†Ô∏è</div>
                    <p class="warning-text">Are you sure you want to delete this entry?</p>
                </div>
                <div class="delete-entry-details">
                    <div class="detail-row">
                        <span class="detail-label">Task:</span>
                        <span id="deleteEntryTask" class="detail-value"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Duration:</span>
                        <span id="deleteEntryDuration" class="detail-value"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelDeleteBtn" class="secondary-btn">Cancel</button>
                <button id="confirmDeleteBtn" class="danger-btn">Delete</button>
            </div>
        </div>
    </div>

    <!-- Teams Call End - Link to Jira Modal -->
    <div id="teamsCallEndModal" class="modal">
        <div class="modal-content modal-medium">
            <div class="modal-header">
                <h2>üìû Link Teams Call to Jira</h2>
                <span class="close-teams-end">&times;</span>
            </div>
            <div class="modal-body">
                <div id="teamsCallEndInfo" class="teams-call-info"></div>
                <p style="margin: 15px 0 10px 0; color: #666; font-size: 14px;">Link this call to a Jira ticket:</p>

                <div class="form-group">
                    <label for="teamsProjectSelect">Project:</label>
                    <select id="teamsProjectSelect" class="form-select">
                        <option value="">Select a project...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="teamsTicketSelect">Ticket:</label>
                    <select id="teamsTicketSelect" class="form-select" disabled>
                        <option value="">Select a project first...</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="skipJiraLinkBtn" class="secondary-btn">Skip - Keep Generic</button>
                <button id="confirmJiraLinkBtn" class="primary-btn" disabled>Link to Ticket</button>
            </div>
        </div>
    </div>

    <!-- Bulk Delete Confirmation Modal -->
    <div id="bulkDeleteModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Delete Multiple Entries?</h2>
                <span class="close-bulk-delete">&times;</span>
            </div>
            <div class="modal-body">
                <div class="delete-warning">
                    <div class="warning-icon">‚ö†Ô∏è</div>
                    <p class="warning-text">Are you sure you want to delete <strong id="bulkDeleteCount">0</strong> <span id="bulkDeleteEntryText">entries</span>?</p>
                </div>
                <div class="bulk-delete-info">
                    <p style="color: #666; font-size: 13px; margin-top: 15px;">This action cannot be undone.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelBulkDeleteBtn" class="secondary-btn">Cancel</button>
                <button id="confirmBulkDeleteBtn" class="danger-btn">Delete All</button>
            </div>
        </div>
    </div>

    <script src="index.js"></script>
</body>
</html>